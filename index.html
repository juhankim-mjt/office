<!doctype html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>MBTI â†’ ì–´ìš¸ë¦¬ëŠ” ê°•ì•„ì§€ ì‹¬ë¦¬í…ŒìŠ¤íŠ¸</title>
<style>
  body{font-family:system-ui,-apple-system,'Segoe UI',Roboto,'Noto Sans KR',sans-serif;background:#f7f7fb;color:#222;padding:20px}
  .container{max-width:880px;margin:0 auto;background:#fff;border-radius:12px;padding:20px;box-shadow:0 6px 24px rgba(20,20,50,0.06)}
  h1{margin:0 0 8px;font-size:22px}
  p.lead{margin:0 0 16px;color:#555}
  .q{padding:14px;border-radius:10px;border:1px solid #eee;margin-bottom:12px;background:#fcfcff}
  .q h3{margin:0 0 8px;font-size:16px}
  .btn-row{display:flex;gap:8px}
  .btn{flex:1;padding:10px;border-radius:8px;border:1px solid #ddd;background:#fff;cursor:pointer}
  .btn:hover{box-shadow:0 3px 10px rgba(0,0,0,0.06)}
  #result{margin-top:18px;padding:16px;border-radius:10px;border:1px dashed #dfe6ff;background:#fbfbff}
  .result-title{font-weight:700;font-size:18px;margin-bottom:8px}
  .result-body{white-space:pre-wrap;color:#333}
  .actions{margin-top:12px;display:flex;gap:8px;flex-wrap:wrap}
  .action-btn{padding:8px 12px;border-radius:8px;border:0;background:#3b82f6;color:#fff;cursor:pointer}
  .action-btn.secondary{background:#6b7280}
  canvas{display:block;margin-top:12px;border-radius:8px;border:1px solid #eee}
  footer{margin-top:16px;font-size:13px;color:#666}
</style>
</head>
<body>
<div class="container">
  <h1>MBTIë¡œ ë³´ëŠ” ë‚˜ë‘ ì–´ìš¸ë¦¬ëŠ” ê°•ì•„ì§€ í…ŒìŠ¤íŠ¸ ğŸ¶</h1>
  <p class="lead">ì•„ë˜ ì§ˆë¬¸ì— ëª¨ë‘ ë‹µí•˜ë©´ ë‹¹ì‹ ì˜ MBTIë¥¼ ì¶”ì •í•˜ê³ , ê·¸ MBTIì™€ ì–´ìš¸ë¦¬ëŠ” ê°•ì•„ì§€ ê²¬ì¢…ê³¼ ì„¤ëª…ì„ ë³´ì—¬ë“œë¦½ë‹ˆë‹¤.</p>

  <div id="quiz"></div>

  <div style="text-align:center;margin-top:10px">
    <button id="submit" class="action-btn">ê²°ê³¼ ë³´ê¸°</button>
    <button id="reset" class="action-btn secondary">ë‹¤ì‹œí•˜ê¸°</button>
  </div>

  <div id="result" style="display:none">
    <div class="result-title" id="result-title"></div>
    <div class="result-body" id="result-body"></div>
    <div class="actions">
      <button id="shareKakao" class="action-btn">ì¹´ì¹´ì˜¤í†¡ ê³µìœ í•˜ê¸°</button>
      <button id="copyText" class="action-btn secondary">í…ìŠ¤íŠ¸ ë³µì‚¬</button>
    </div>
    <canvas id="cardCanvas" width="820" height="420" style="display:none"></canvas>
  </div>

  <footer>ğŸ‘‰ ê°•ì•„ì§€ PNG ì´ë¯¸ì§€ëŠ” DOG_IMAGES ë§¤í•‘ í…Œì´ë¸”ì— ì§ì ‘ êµì²´í•˜ì„¸ìš”.</footer>
</div>

<!-- ì¹´ì¹´ì˜¤ SDK -->
<script src="https://developers.kakao.com/sdk/js/kakao.js"></script>
<script>
  Kakao.init("ì—¬ê¸°ì—_ë³¸ì¸_Javascript_ì•±í‚¤"); // âš ï¸ ë°œê¸‰ë°›ì€ ì•±í‚¤ ì…ë ¥
</script>

<script>
/* MBTI â†’ ê²¬ì¢… ë§¤í•‘ */
const DATA = {
  questions: [
    {id:1,text:"íŒŒí‹°ì— ê°€ë©´ ì£¼ë¡œ ë¬´ì—‡ì„ í•˜ë‚˜ìš”?",a:{text:"ì‚¬ëŒë“¤ê³¼ ì–´ìš¸ë ¤ ë¨¼ì € ë§ ê±°ëŠ” í¸ (E)",score:{E:1}},b:{text:"ì¡°ìš©íˆ ê´€ì°°í•˜ê±°ë‚˜ ì¹œí•œ ì‚¬ëŒë§Œ ë§Œë‚˜ëŠ” í¸ (I)",score:{I:1}}},
    {id:2,text:"ê²°ì •í•  ë•Œ ë¬´ì—‡ì— ë” ì˜ì§€í•˜ë‚˜ìš”?",a:{text:"í˜„ì‹¤ì  ì‚¬ì‹¤ê³¼ ê²½í—˜ (S)",score:{S:1}},b:{text:"ì§ê´€ê³¼ ê°€ëŠ¥ì„± (N)",score:{N:1}}},
    {id:3,text:"ê°ˆë“± ìƒí™©ì—ì„œ ë‚˜ëŠ”?",a:{text:"ë…¼ë¦¬(ì›ì¸Â·í•´ê²°) ì¤‘ì‹¬ìœ¼ë¡œ ì ‘ê·¼ (T)",score:{T:1}},b:{text:"ê°ì •ê³¼ ê´€ê³„ë¥¼ ê³ ë ¤í•´ ê²°ë¡  (F)",score:{F:1}}},
    {id:4,text:"ê³„íš ì„¸ìš¸ ë•Œ ë‚˜ëŠ”?",a:{text:"ë¯¸ë¦¬ ê³„íší•´ ë‘ëŠ” í¸ (J)",score:{J:1}},b:{text:"ì¦‰í¥ì ìœ¼ë¡œ ìœ ì—°í•˜ê²Œ ê°€ëŠ” í¸ (P)",score:{P:1}}},
    {id:5,text:"íœ´ì¼ì— ë‹¹ì‹ ì´ë¼ë©´?",a:{text:"ì—¬ëŸ¿ì´ë‘ í™œë™ì ìœ¼ë¡œ ë³´ë‚´ê¸° (E)",score:{E:1}},b:{text:"ì§‘ì—ì„œ í˜¼ì/ì ì€ ì‚¬ëŒê³¼ ì‰¬ê¸° (I)",score:{I:1}}},
    {id:6,text:"ìƒˆë¡œìš´ ê²ƒ ë°°ìš¸ ë•Œ ì„ í˜¸ëŠ”?",a:{text:"ê²€ì¦ëœ ë°©ë²•ê³¼ ì‹¤ìŠµ (S)",score:{S:1}},b:{text:"ì´ë¡ Â·ì›ë¦¬Â·ì•„ì´ë””ì–´ ë¨¼ì € (N)",score:{N:1}}},
    {id:7,text:"ì¹œêµ¬ê°€ ê³ ë¯¼ ìƒë‹´í•˜ë©´ ë‹¹ì‹ ì€?",a:{text:"ì§ì„¤ì ìœ¼ë¡œ í•µì‹¬ ì§€ì  (T)",score:{T:1}},b:{text:"ê³µê°í•˜ê³  ê°ì • ë¨¼ì € ì•ˆì • (F)",score:{F:1}}},
    {id:8,text:"ì¼í•  ë•Œ ë‹¹ì‹ ì˜ ìŠ¤íƒ€ì¼ì€?",a:{text:"ë§ˆê°Â·ëª©í‘œ ë§ì¶° ì²´ê³„ì ìœ¼ë¡œ (J)",score:{J:1}},b:{text:"ìƒí™©ì— ë”°ë¼ ìœ ì—°í•˜ê²Œ ë³€ê²½ (P)",score:{P:1}}}
  ],
  mbti_to_dog: {
    "ISTJ":{"breed":"German Shepherd","dog_personality":"ì±…ì„ê° ìˆê³  ì‹ ì¤‘í•˜ë©° ì¶©ì„±ì‹¬ ê°•í•¨.","mbti_desc":"ISTJ: í˜„ì‹¤ì ì´ê³  ì‹¤ìš©ì ì¸ ê´€ë¦¬ìí˜•."},
    "ISFJ":{"breed":"Golden Retriever","dog_personality":"ì˜¨í™”í•˜ê³  ê°€ì¡± ì§€í–¥ì .","mbti_desc":"ISFJ: ì˜¨í™”í•œ ìˆ˜í˜¸ìí˜•."},
    "INFJ":{"breed":"Cavalier King Charles Spaniel","dog_personality":"ì„¬ì„¸í•˜ê³  ì˜¨ìˆœ, ì¡°ìš©í•œ ì• êµí˜•.","mbti_desc":"INFJ: ì´ìƒì£¼ì˜ì  ì¡°ì–¸ì."},
    "INTJ":{"breed":"Shiba Inu","dog_personality":"ë…ë¦½ì ì´ê³  ê³ ì§‘ìŠ¤ëŸ¬ì›€.","mbti_desc":"INTJ: ì „ëµê°€í˜•."},
    "ISTP":{"breed":"Jack Russell Terrier","dog_personality":"ëª¨í—˜ì ì´ê³  í™œë™ì .","mbti_desc":"ISTP: ì¥ì¸í˜• ë¬¸ì œ í•´ê²°ì."},
    "ISFP":{"breed":"Beagle","dog_personality":"ê°ì„±ì ì´ê³  í˜¸ê¸°ì‹¬ ë§ìŒ.","mbti_desc":"ISFP: ì˜ˆìˆ ê°€í˜•."},
    "INFP":{"breed":"Samoyed","dog_personality":"ì˜¨í™”í•˜ê³  ë”°ëœ»í•¨.","mbti_desc":"INFP: ì¤‘ì¬ìí˜•."},
    "INTP":{"breed":"Basenji","dog_personality":"ì§€ì ì´ê³  íƒêµ¬ì‹¬ ê°•í•¨.","mbti_desc":"INTP: ë¶„ì„ê°€í˜•."},
    "ESTP":{"breed":"Boxer","dog_personality":"í™œë°œí•˜ê³  ì¦‰í¥ì .","mbti_desc":"ESTP: ì‹¤í–‰ê°€í˜•."},
    "ESFP":{"breed":"Labrador Retriever","dog_personality":"ì‚¬êµì ì´ê³  ì¦ê±°ì›€ì„ ì¶”êµ¬.","mbti_desc":"ESFP: ì—°ì˜ˆì¸í˜•."},
    "ENFP":{"breed":"Poodle","dog_personality":"ì°½ì˜ì ì´ê³  ì¥ë‚œê¾¸ëŸ¬ê¸°.","mbti_desc":"ENFP: ì¬ëŠ¥ë°œê²¬ê°€."},
    "ENTP":{"breed":"Australian Shepherd","dog_personality":"ê¸°ë¯¼í•˜ê³  ì¥ë‚œê¸° ë§ìŒ.","mbti_desc":"ENTP: ë°œëª…ê°€í˜•."},
    "ESTJ":{"breed":"Rottweiler","dog_personality":"ì±…ì„ê° ê°•í•˜ê³  ë³´í˜¸ ë³¸ëŠ¥.","mbti_desc":"ESTJ: ì§‘í–‰ìí˜•."},
    "ESFJ":{"breed":"Corgi","dog_personality":"ì‚¬êµì ì´ê³  íƒ€ì¸ì„ ì±™ê¹€.","mbti_desc":"ESFJ: ì œê³µìí˜•."},
    "ENFJ":{"breed":"Border Collie","dog_personality":"ë¦¬ë”ì‹­ ìˆê³  í™œë°œ.","mbti_desc":"ENFJ: ì–¸ì–´ë¡œ ì´ë„ëŠ” ë¦¬ë”."},
    "ENTJ":{"breed":"Siberian Husky","dog_personality":"ì—ë„ˆì§€ ë„˜ì¹˜ê³  ë„ì „ì .","mbti_desc":"ENTJ: í†µì†”ìí˜•."}
  },
  result_template: {
    title:"ë‹¹ì‹ ì˜ MBTI: {mbti} â€” ì–´ìš¸ë¦¬ëŠ” ê°•ì•„ì§€: {breed}",
    body:"{mbti_desc}\n\nê°•ì•„ì§€ ì„±ê²©: {dog_personality}\n\ní•´ì„: {interpretation}"
  }
};

/* ê²¬ì¢…ë³„ ìƒ˜í”Œ ì´ë¯¸ì§€ URL */
const DOG_IMAGES = {
  "German Shepherd":"https://place-puppy.com/400x200?image=1",
  "Golden Retriever":"https://place-puppy.com/400x200?image=2",
  "Cavalier King Charles Spaniel":"https://place-puppy.com/400x200?image=3",
  "Shiba Inu":"https://place-puppy.com/400x200?image=4",
  "Jack Russell Terrier":"https://place-puppy.com/400x200?image=5",
  "Beagle":"https://place-puppy.com/400x200?image=6",
  "Samoyed":"https://place-puppy.com/400x200?image=7",
  "Basenji":"https://place-puppy.com/400x200?image=8",
  "Boxer":"https://place-puppy.com/400x200?image=9",
  "Labrador Retriever":"https://place-puppy.com/400x200?image=10",
  "Poodle":"https://place-puppy.com/400x200?image=11",
  "Australian Shepherd":"https://place-puppy.com/400x200?image=12",
  "Rottweiler":"https://place-puppy.com/400x200?image=13",
  "Corgi":"https://place-puppy.com/400x200?image=14",
  "Border Collie":"https://place-puppy.com/400x200?image=15",
  "Siberian Husky":"https://place-puppy.com/400x200?image=16"
};

/* --- DOM --- */
const quizEl=document.getElementById('quiz');
const submitBtn=document.getElementById('submit');
const resetBtn=document.getElementById('reset');
const resultBlock=document.getElementById('result');
const resultTitle=document.getElementById('result-title');
const resultBody=document.getElementById('result-body');
const shareKakaoBtn=document.getElementById('shareKakao');
const copyTextBtn=document.getElementById('copyText');
const canvas=document.getElementById('cardCanvas');
const ctx=canvas.getContext('2d');
let answers={};

/* --- UI --- */
function renderQuiz(){
  quizEl.innerHTML='';
  DATA.questions.forEach(q=>{
    const qdiv=document.createElement('div');qdiv.className='q';
    qdiv.innerHTML=`<h3>${q.id}. ${q.text}</h3>`;
    const row=document.createElement('div');row.className='btn-row';
    const aBtn=document.createElement('button');aBtn.className='btn';aBtn.textContent='A. '+q.a.text;
    const bBtn=document.createElement('button');bBtn.className='btn';bBtn.textContent='B. '+q.b.text;
    aBtn.onclick=()=>{answers[q.id]='a';markSelected(q.id);};
    bBtn.onclick=()=>{answers[q.id]='b';markSelected(q.id);};
    row.appendChild(aBtn);row.appendChild(bBtn);qdiv.appendChild(row);
    quizEl.appendChild(qdiv);
  });
}
function markSelected(qid){
  const qdiv=quizEl.querySelectorAll('.q')[qid-1];
  const btns=qdiv.querySelectorAll('.btn');
  btns.forEach(b=>b.style.borderColor='#ddd');
  const c=answers[qid];
  if(c==='a')btns[0].style.borderColor='#3b82f6';
  if(c==='b')btns[1].style.borderColor='#3b82f6';
}
function calcMBTI(){
  const s={E:0,I:0,S:0,N:0,T:0,F:0,J:0,P:0};
  for(const q of DATA.questions){
    const pick=answers[q.id];if(!pick)continue;
    const sc=(pick==='a')?q.a.score:q.b.score;
    for(const k in sc)s[k]+=sc[k];
  }
  const letter=(s.E>=s.I?'E':'I')+(s.S>=s.N?'S':'N')+(s.T>=s.F?'T':'F')+(s.J>=s.P?'J':'P');
  return{letter,score:s};
}
function makeInterpretation(mbti){
  const base=DATA.mbti_to_dog[mbti];
  return `ë‹¹ì‹ ì€ ${mbti} ì„±í–¥ìœ¼ë¡œ, ${base.mbti_desc}\n${base.dog_personality} íŠ¹ì„±ê³¼ ì˜ ì–´ìš¸ë¦½ë‹ˆë‹¤.`;
}
function showResult(){
  if(Object.keys(answers).length<DATA.questions.length){alert('ëª¨ë“  ì§ˆë¬¸ì— ë‹µí•´ì£¼ì„¸ìš”!');return;}
  const {letter}=calcMBTI();
  const info=DATA.mbti_to_dog[letter];
  const interp=makeInterpretation(letter);
  const title=DATA.result_template.title.replace('{mbti}',letter).replace('{breed}',info.breed);
  const body=DATA.result_template.body.replace('{mbti_desc}',info.mbti_desc).replace('{dog_personality}',info.dog_personality).replace('{interpretation}',interp);
  resultTitle.textContent=title;resultBody.textContent=body;resultBlock.style.display='block';
  quizEl.style.display='none';submitBtn.style.display='none';
  drawCard(letter,info,interp);
  shareKakaoBtn.onclick=()=>{
    const dogImg=DOG_IMAGES[info.breed]||"https://place-puppy.com/400x200";
    Kakao.Share.sendDefault({
      objectType:"feed",
      content:{
        title:title,
        description:body.substring(0,80)+"...",
        imageUrl:dogImg,
        link:{mobileWebUrl:window.location.href,webUrl:window.location.href}
      },
      buttons:[{title:"ë‚˜ë„ í…ŒìŠ¤íŠ¸ í•´ë³´ê¸°",link:{mobileWebUrl:window.location.origin,webUrl:window.location.origin}}]
    });
  };
}
function drawCard(mbti,info,interp){
  const w=canvas.width,h=canvas.height;
  ctx.fillStyle='#fff';ctx.fillRect(0,0,w,h);
  ctx.fillStyle='#f1f5f9';ctx.fillRect(0,0,320,h);
  ctx.fillStyle='#222';ctx.font='bold 32px sans-serif';ctx.fillText(info.breed,18,60);
  ctx.font='24px sans-serif';ctx.fillText('MBTI: '+mbti,18,100);
  ctx.font='80px serif';ctx.fillText('ğŸ¶',110,220);
  ctx.fillStyle='#111827';ctx.font='20px sans-serif';wrapText(ctx,info.mbti_desc,340,40,460,26);
  ctx.font='18px sans-serif';wrapText(ctx,'ê°•ì•„ì§€ ì„±ê²©: '+info.dog_personality,340,180,460,22);
  ctx.font='16px sans-serif';wrapText(ctx,interp,340,260,460,20);
  canvas.style.display='block';
}
function wrapText(ctx,text,x,y,maxWidth,lineHeight){
  const words=text.split(' ');let line='';
  for(let n=0;n<words.length;n++){
    const test=line+words[n]+' ';const w=ctx.measureText(test).width;
    if(w>maxWidth&&n>0){ctx.fillText(line,x,y);line=words[n]+' ';y+=lineHeight;}
    else line=test;
  }
  ctx.fillText(line,x,y);
}
submitBtn.onclick=showResult;
resetBtn.onclick=()=>{answers={};renderQuiz();resultBlock.style.display='none';canvas.style.display='none';quizEl.style.display='block';submitBtn.style.display='inline';};
copyTextBtn.onclick=()=>{const text=resultTitle.textContent+"\n\n"+resultBody.textContent;navigator.clipboard.writeText(text).then(()=>alert('ê²°ê³¼ê°€ ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.'));};

/* ì´ˆê¸° ì‹¤í–‰ */
renderQuiz();
</script>
</body>
</html>
